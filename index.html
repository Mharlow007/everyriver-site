<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EveryRiver — Preview Home</title>
  <link rel="stylesheet" href="assets/css/preview.css?v=20260109-2" />
</head>
<body>
  <main class="hero-full hero-bg" aria-label="Hero">
    <div class="hero-overlay">
      <div class="hero-brand">
        <img src="assets/images/raster/boat_logo.png" alt="EveryRiver boat logo" />
        <span class="hero-brand-name">EveryRiver</span>
      </div>
      <div class="hero-phrases" aria-label="EveryRiver vision statements">
        <span class="tagline">A living atlas and guide to rivers<br><br>For the love of rivers everywhere</span>
        <a href="follow.html" class="nav-pill nav-pill--stay" aria-label="Follow the Journey">Follow the Journey</a>
      </div>

      <section class="mission-topics" aria-label="Mission focus areas">
        <h3 class="topic-pill visiting">Visiting</h3>
        <h3 class="topic-pill boating">Boating</h3>
        <h3 class="topic-pill watersports">Watersports</h3>
        <h3 class="topic-pill nature">Nature</h3>
        <h3 class="topic-pill culture">Culture</h3>
      </section>
    </div>
  </main>

  <main class="mission-content" id="mission" aria-labelledby="mission-stories-heading">
    <section class="section mission-card wide mission-card--intro">
      <div class="mission-body">
        <p>We believe the more you know a river, the more you love it.</p>
        <p>People come to rivers for all sorts of reasons - to walk, paddle, fish, boat, swim, feed ducks or feed themselves, all with a beautiful view.</p>
        <p>The more we understand the river, the more we can access it, enjoy it, care for it and have more fun. And from that greater enjoyment comes a deeper curiosity.</p>
        <p></p>
        <p>EveryRiver is a not-for-profit organisation that has the wild ambition of creating a live atlas and guide for every river everywhere. We think that would be just amazing. We hope you do too.</p>
      </div>
    </section>

    <section class="section mission-card">
      <h3 class="mission-subhead">Atlas and Guide</h3>
      <p>We are developing an open, rich and permanent source of river information in an app and website. Below are some sample screenshots of the real work-in-progress. But it is very early days and this will be wrong now and much improved later. This is the coat-rail on which you will be able to hang your stories, of your river, with your photos and your information.</p>
      <p><a class="nav-pill" href="follow.html">Follow the journey</a></p>
    </section>

    <section class="section mission-card">
      <h3 class="mission-subhead" id="mission-stories-heading">Telling Stories</h3>
      <p>We are aiming to have daily new content on rivers from March 2026.</p>
      <p>We will cover watersports, boating, nature, history, pollution, river conditions, geography, hydrology, how to visit, how to access, where to stay or eat with a river view, navigation rules, river conditions, rainfall, aquifer levels, historic river buildings, flow rates, events, locks, route planning, canoe/paddleboard trails, tides, the sheer beauty of a river or canal landscape and so much more.</p>
      <p>Please <a href="follow.html">follow the journey</a> to keep in touch with what we are learning and doing. We will need your feedback to create something of greatest worth to you.</p>
      <p>If you subscribe to these channels you will also see our photo and video content as it emerges. The Flickr page is where we are already storing the photos we are use on the prototype database and website. They're not our best, but they are a start.</p>
    </section>
    <section class="mission-carousel" aria-label="River related screenshots">
      <div class="carousel" aria-live="polite">
        <button class="carousel-btn prev" aria-label="Previous image" type="button">‹</button>
        <ul class="carousel-track" tabindex="0">
          <!-- Original set (will be shuffled) -->
          <li class="slide" aria-current="true"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 184545.jpg" alt="Screenshot 184545" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 184754.jpg" alt="Screenshot 184754" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 185324.jpg" alt="Screenshot 185324" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 185454.jpg" alt="Screenshot 185454" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 185532.jpg" alt="Screenshot 185532" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 185548.jpg" alt="Screenshot 185548" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 185808.jpg" alt="Screenshot 185808" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 190413.jpg" alt="Screenshot 190413" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 190442.jpg" alt="Screenshot 190442" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 194657.jpg" alt="Screenshot 194657" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 194853.jpg" alt="Screenshot 194853" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 195008.jpg" alt="Screenshot 195008" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 195132.jpg" alt="Screenshot 195132" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 195255.jpg" alt="Screenshot 195255" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-28 195312.jpg" alt="Screenshot 195312" /></li>
          <!-- New 2025-11-30 additions -->
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 193458.jpg" alt="Screenshot 193458" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 195323.jpg" alt="Screenshot 195323" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 195744.jpg" alt="Screenshot 195744" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 200046.jpg" alt="Screenshot 200046" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 200136.jpg" alt="Screenshot 200136" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 200152.jpg" alt="Screenshot 200152" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 200208.jpg" alt="Screenshot 200208" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 200232.jpg" alt="Screenshot 200232" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 200848.jpg" alt="Screenshot 200848" /></li>
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-11-30 201448.jpg" alt="Screenshot 201448" /></li>
          <!-- New 2025-12-19 addition -->
          <li class="slide"><img loading="lazy" src="assets/images/raster/Screenshot 2025-12-19 062832.jpg" alt="Screenshot 062832" /></li>
        </ul>
        <button class="carousel-btn next" aria-label="Next image" type="button">›</button>
      </div>
    </section>
    <p class="site-credit"><a href="about.html">© EveryRiver Atlas Limited</a></p>
  </main>

  <nav class="bottom-nav" aria-label="Primary">
    <a href="index.html" class="active" aria-label="Home">
      <img src="assets/images/svg/home-svgrepo-com.svg" alt="" class="nav-icon" />
    </a>
    <a href="follow.html" class="nav-pill" aria-label="Follow the journey">Follow the journey</a>
    <a href="about.html" aria-label="About Us">
      <img src="assets/images/raster/boat_button.png" alt="EveryRiver logo" class="nav-icon nav-logo" />
    </a>
  </nav>

  <script>
  // Accessible fade carousel with robust dynamic height & resize/swipe support
  (function(){
    const root=document.querySelector('.mission-carousel .carousel');
    if(!root) return;
    const track=root.querySelector('.carousel-track');
    const slides=[...track.children];
    // Shuffle slides to present in random order each load (Fisher-Yates)
    (function shuffle(){
      for(let i=slides.length-1;i>0;i--){
        const j=Math.floor(Math.random()*(i+1));
        if(i!==j){
          // swap in DOM
          const nodeI=slides[i];
          const nodeJ=slides[j];
          const nextI=nodeI.nextSibling;
          track.insertBefore(nodeI,nodeJ);
          track.insertBefore(nodeJ,nextI);
          [slides[i],slides[j]]=[slides[j],slides[i]];
        }
      }
      // Reset current marker to first after shuffle
      slides.forEach(s=>s.removeAttribute('aria-current'));
      slides[0].setAttribute('aria-current','true');
    })();
    const prev=root.querySelector('.carousel-btn.prev');
    const next=root.querySelector('.carousel-btn.next');
    let index=slides.findIndex(s=>s.hasAttribute('aria-current')); if(index<0) index=0;

    function setActive(i){
      if(i===index) return;
      slides[index].removeAttribute('aria-current');
      slides[i].setAttribute('aria-current','true');
      index=i;
      adjustHeight();
    }

    function adjustHeight(){
      const slide=slides[index];
      const img=slide.querySelector('img');
      if(!img) return;
      // In fullscreen modes, let CSS own the container height (so we can keep
      // a full-viewport backdrop while the image sizes itself proportionally).
      if(root.matches(':fullscreen') || root.classList.contains('carousel-faux-fullscreen')){
        root.style.height='';
        return;
      }
      if(img.complete){
        root.style.height=img.offsetHeight+ 'px';
      }
    }

    function go(dir){
      setActive( (index + dir + slides.length) % slides.length );
    }

    prev.addEventListener('click',()=>go(-1));
    next.addEventListener('click',()=>go(1));
    track.addEventListener('keydown',e=>{ if(e.key==='ArrowLeft'){go(-1)} else if(e.key==='ArrowRight'){go(1)} });

    // Swipe (horizontal threshold)
    let sx=0,dx=0; track.addEventListener('touchstart',e=>{sx=e.touches[0].clientX; dx=0});
    track.addEventListener('touchmove',e=>{dx=e.touches[0].clientX - sx});
    track.addEventListener('touchend',()=>{ if(Math.abs(dx)>45){ go(dx>0?-1:1) } });

    // Height & orientation changes
    window.addEventListener('resize',adjustHeight);

    // Observe image size changes (e.g., responsive layout shifts)
    const ro=new ResizeObserver(()=>{ adjustHeight(); });
    slides.forEach(slide=>{ const img=slide.querySelector('img'); if(img){ img.addEventListener('load',adjustHeight); ro.observe(img); } });

    adjustHeight();

    // Fullscreen on image click / double-tap
    let lastTap=0;
    slides.forEach(slide=>{
      const img=slide.querySelector('img');
      if(!img) return;
      img.style.cursor='zoom-in';
      img.addEventListener('click',()=>{
        const now=Date.now();
        const isDouble=now - lastTap < 350; // double-tap window
        lastTap=now;
        const target=root; // fullscreen the carousel container
        if(document.fullscreenElement || document.webkitFullscreenElement){
          if(document.exitFullscreen){document.exitFullscreen();}
          else if(document.webkitExitFullscreen){document.webkitExitFullscreen();}
          else{target.classList.remove('carousel-faux-fullscreen');}
          return;
        }
        function tryNativeFullscreen(){
          if(target.requestFullscreen){target.requestFullscreen();return true;}
          if(target.webkitRequestFullscreen){target.webkitRequestFullscreen();return true;}
          return false;
        }
        const wantFullscreen = true; // both single and double tap toggle
        if(wantFullscreen){
          if(!tryNativeFullscreen()){
            // Fallback for iOS Safari: simulate fullscreen via class
            target.classList.add('carousel-faux-fullscreen');
          }
        }
      });
    });
    // Exit faux fullscreen on Escape key
    document.addEventListener('keydown',e=>{ if(e.key==='Escape'){ root.classList.remove('carousel-faux-fullscreen'); } });
    // Sync height after native fullscreen changes
    ['fullscreenchange','webkitfullscreenchange'].forEach(evt=>{
      document.addEventListener(evt,()=>{ adjustHeight(); });
    });
  })();
  </script>
</body>
</html>
